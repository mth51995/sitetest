<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Plataforma de Cursos</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
  --primary:#2d72ff;
  --bg:#f4f6f8;
  --card:#fff;
  --success:#28a745;
}
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:var(--bg)}
.hidden{display:none}
header{padding:15px;background:#fff;text-align:center;font-weight:bold}
.container{max-width:1100px;margin:auto;padding:20px}

/* LOGIN */
.login{
  max-width:360px;margin:80px auto;background:#fff;
  padding:25px;border-radius:8px;box-shadow:0 10px 30px rgba(0,0,0,.1)
}
input,button{
  width:100%;padding:12px;margin-top:10px
}
button{background:var(--primary);color:#fff;border:none;border-radius:4px}

/* DASHBOARD */
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px}
.card{
  background:#fff;border-radius:8px;overflow:hidden;
  box-shadow:0 5px 15px rgba(0,0,0,.1);cursor:pointer
}
.card img{width:100%;height:140px;object-fit:cover}
.card div{padding:15px}
.progress{height:8px;background:#ddd;border-radius:4px}
.progress span{display:block;height:100%;background:var(--success)}

/* CURSO */
.lesson{padding:10px;border-bottom:1px solid #eee;cursor:pointer}
.lesson.done{color:var(--success);font-weight:bold}
iframe{width:100%;height:360px;margin-top:15px}

/* ADMIN */
.admin-box{background:#fff;padding:15px;border-radius:8px;margin-bottom:20px}
</style>
</head>

<body>

<header>üéì Plataforma de Cursos</header>

<!-- LOGIN -->
<div class="login" id="login">
  <h2>Entrar</h2>
  <input id="email" placeholder="Email">
  <input id="senha" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<!-- DASHBOARD -->
<div class="container hidden" id="dashboard">
  <h2>Meus Cursos</h2>
  <div class="cards" id="cards"></div>
</div>

<!-- CURSO -->
<div class="container hidden" id="curso">
  <button onclick="voltar()">‚Üê Voltar</button>
  <h2 id="cursoNome"></h2>
  <div class="progress"><span id="barra"></span></div>
  <div id="aulas"></div>
  <iframe id="player" allowfullscreen></iframe>
  <button id="certBtn" class="hidden" onclick="certificado()">üéì Baixar Certificado</button>
</div>

<!-- ADMIN -->
<div class="container hidden" id="admin">
  <h2>Painel ADMIN</h2>

  <div class="admin-box">
    <input id="cursoTitulo" placeholder="Nome do curso">
    <input id="cursoImg" placeholder="URL da imagem">
    <button onclick="addCurso()">Criar Curso</button>
  </div>
</div>

<script>
const adminLogin={email:"admin@admin.com",senha:"123456"};
let cursos=JSON.parse(localStorage.getItem("cursos"))||{
 eletricista:{nome:"Eletricista Predial",img:"https://picsum.photos/400?1",
 aulas:["M7lc1UVf-VE","ScMzIvxBSi4","ysz5S6PUM-U","E7wJTI-1dvQ","aqz-KE-bpKQ"]}
};
let atual="",assistidos=[];

function login(){
 if(email.value===adminLogin.email && senha.value===adminLogin.senha){
  loginBox(false);admin.classList.remove("hidden");return;
 }
 loginBox(false);dashboard.classList.remove("hidden");renderCursos();
}

function loginBox(show){login.classList.toggle("hidden",!show)}

function renderCursos(){
 cards.innerHTML="";
 for(let id in cursos){
  let done=(JSON.parse(localStorage.getItem(id))||[]).length;
  let total=cursos[id].aulas.length;
  let p=(done/total)*100;
  cards.innerHTML+=`
  <div class="card" onclick="abrir('${id}')">
   <img src="${cursos[id].img}">
   <div><strong>${cursos[id].nome}</strong>
   <div class="progress"><span style="width:${p}%"></span></div>
   </div>
  </div>`;
 }
}

function abrir(id){
 atual=id;
 assistidos=JSON.parse(localStorage.getItem(id))||[];
 dashboard.classList.add("hidden");
 curso.classList.remove("hidden");
 cursoNome.innerText=cursos[id].nome;
 renderAulas();
}

function renderAulas(){
 aulas.innerHTML="";
 cursos[atual].aulas.forEach((v,i)=>{
  aulas.innerHTML+=`
   <div class="lesson ${assistidos.includes(i)?"done":""}"
    onclick="${assistidos.length===i?'play('+i+')':''}">
    Aula ${i+1} ${assistidos.includes(i)?"‚úî":""}
   </div>`;
 });
 barra.style.width=(assistidos.length/cursos[atual].aulas.length)*100+"%";
 certBtn.classList.toggle("hidden",assistidos.length!==cursos[atual].aulas.length);
}

function play(i){
 player.src=`https://www.youtube.com/embed/${cursos[atual].aulas[i]}?autoplay=1`;
 if(!assistidos.includes(i)){
  assistidos.push(i);
  localStorage.setItem(atual,JSON.stringify(assistidos));
  renderAulas();
 }
}

function voltar(){
 curso.classList.add("hidden");
 dashboard.classList.remove("hidden");
 renderCursos();
 player.src="";
}

function addCurso(){
 cursos[cursoTitulo.value.toLowerCase().replace(/ /g,"")]={nome:cursoTitulo.value,img:cursoImg.value,aulas:[]};
 localStorage.setItem("cursos",JSON.stringify(cursos));
 alert("Curso criado");
}

function certificado(){
 const nome=prompt("Digite seu nome:");
 const w=window.open("");
 w.document.write(`<h1>Certificado</h1><p>Certificamos que <b>${nome}</b> concluiu o curso <b>${cursos[atual].nome}</b>.</p>`);
}
</script>

</body>
</html>
