<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>√Årea de Membros</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#f4f6f8}
.hidden{display:none}
header{padding:15px;text-align:center;background:#fff;font-weight:bold}
.box{max-width:360px;margin:80px auto;background:#fff;padding:20px;border-radius:8px}
input,button{width:100%;padding:12px;margin-top:10px}
button{background:#2d72ff;color:#fff;border:none;border-radius:4px}
.container{max-width:1100px;margin:auto;padding:20px}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px}
.card{background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1);cursor:pointer}
.card img{width:100%;height:140px;object-fit:cover}
.card div{padding:15px}
.progress{height:8px;background:#ddd;border-radius:4px}
.progress span{display:block;height:100%;background:#28a745}
.lesson{padding:10px;border-bottom:1px solid #eee;cursor:pointer}
.lesson.done{color:#28a745;font-weight:bold}
iframe{width:100%;height:360px;margin-top:15px}
</style>
</head>

<body>

<header>üéì Plataforma de Cursos</header>

<!-- LOGIN -->
<div class="box" id="loginBox">
  <h2>Entrar</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<!-- DASHBOARD -->
<div class="container hidden" id="dashboard">
  <h2>Meus Cursos</h2>
  <div class="cards" id="cards"></div>
</div>

<!-- CURSO -->
<div class="container hidden" id="cursoBox">
  <button onclick="voltar()">‚Üê Voltar</button>
  <h2 id="cursoNome"></h2>
  <div class="progress"><span id="barra"></span></div>
  <div id="aulas"></div>
  <iframe id="player" allowfullscreen></iframe>
</div>

<!-- ADMIN -->
<div class="container hidden" id="adminBox">
  <h2>Painel Admin</h2>
  <input id="novoCurso" placeholder="Nome do curso">
  <input id="novaImg" placeholder="URL da imagem">
  <button onclick="criarCurso()">Criar Curso</button>
</div>

<script>
const admin={email:"admin@admin.com",senha:"123456"};

let cursos=JSON.parse(localStorage.getItem("cursos")) || {
 eletricista:{
  nome:"Eletricista Predial",
  img:"https://picsum.photos/400?1",
  aulas:["M7lc1UVf-VE","ScMzIvxBSi4","ysz5S6PUM-U","aqz-KE-bpKQ","E7wJTI-1dvQ"]
 }
};

let atual="",assistidos=[];

function login(){
 const e=document.getElementById("email").value;
 const s=document.getElementById("password").value;

 document.getElementById("loginBox").classList.add("hidden");

 if(e===admin.email && s===admin.senha){
  document.getElementById("adminBox").classList.remove("hidden");
  return;
 }
 document.getElementById("dashboard").classList.remove("hidden");
 renderCursos();
}

function renderCursos(){
 const cards=document.getElementById("cards");
 cards.innerHTML="";
 for(let id in cursos){
  let done=(JSON.parse(localStorage.getItem(id))||[]).length;
  let total=cursos[id].aulas.length;
  let p=(done/total)*100;
  cards.innerHTML+=`
   <div class="card" onclick="abrirCurso('${id}')">
    <img src="${cursos[id].img}">
    <div>
     <strong>${cursos[id].nome}</strong>
     <div class="progress"><span style="width:${p}%"></span></div>
    </div>
   </div>`;
 }
}

function abrirCurso(id){
 atual=id;
 assistidos=JSON.parse(localStorage.getItem(id))||[];
 document.getElementById("dashboard").classList.add("hidden");
 document.getElementById("cursoBox").classList.remove("hidden");
 document.getElementById("cursoNome").innerText=cursos[id].nome;
 renderAulas();
}

function renderAulas(){
 const aulas=document.getElementById("aulas");
 aulas.innerHTML="";
 cursos[atual].aulas.forEach((v,i)=>{
  aulas.innerHTML+=`
   <div class="lesson ${assistidos.includes(i)?"done":""}"
   onclick="${assistidos.length===i?'play('+i+')':''}">
   Aula ${i+1} ${assistidos.includes(i)?"‚úî":""}
   </div>`;
 });
 document.getElementById("barra").style.width=
 (assistidos.length/cursos[atual].aulas.length)*100+"%";
}

function play(i){
 document.getElementById("player").src=
 `https://www.youtube.com/embed/${cursos[atual].aulas[i]}?autoplay=1`;
 if(!assistidos.includes(i)){
  assistidos.push(i);
  localStorage.setItem(atual,JSON.stringify(assistidos));
  renderAulas();
 }
}

function voltar(){
 document.getElementById("cursoBox").classList.add("hidden");
 document.getElementById("dashboard").classList.remove("hidden");
 document.getElementById("player").src="";
}

function criarCurso(){
 cursos[novoCurso.value.toLowerCase()]={nome:novoCurso.value,img:novaImg.value,aulas:[]};
 localStorage.setItem("cursos",JSON.stringify(cursos));
 alert("Curso criado!");
}
</script>

</body>
</html>
